---
layout: post
title:  "Centos 7 mariadb 10.3 yum 설치"
date:   2023-01-02
description: AWS + Centos 7 + mariadb 10.3
---


#### 1. 설치
<blockquote>
# yum  -y update
# yum install upgrade
</blockquote>
**302에러 발생시 https://new-ngmon.tistory.com/80  초기화 후 다시 처음부터 진행
**aws 일 경우 때로는 I/O 트레픽 초과로 다운로드가 불가한 현상이 있을 수 있어서 aws를 점검해야 함. 

#### 2. repo 잡아준다 (아래링크 반드시 참고)
https://mariadb.org/download/?t=repo-config&d=CentOS+7+%28x86_64%29&v=10.3&r_m=blendbyte
<blockquote># vi /etc/yum.repos.d/MariaDB.repo

[mariadb]
name = MariaDB-10.3.14
baseurl=http://mirror.mariadb.org/yum/10.9/centos7-amd64
# alternative: baseurl=http://archive.mariadb.org/mariadb-10.3.14/yum/centos7-amd64
gpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB
gpgcheck=1

또는 

[mariadb]
name = MariaDB
baseurl = http://yum.mariadb.org/10.3/centos7-amd64
gpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB
gpgcheck=1
</blockquote>



#### 3. 인스톨
<blockquote>
# yum install mariadb-server mariadb
Requites : pv 에러 발생시
# yum install epel-release
후 다시 install~

설치확인
rpm -qa | grep MariaDB
</blockquote>

#### 4. 환경설정
<blockquote>
# cd /etc/my.cnf.d/
# vi mysql-clients.cnf


[mysql]
default-character-set = utf8

[mysql_upgrade]

[mysqladmin]

[mysqlbinlog]

[mysqlcheck]

[mysqldump]
default-character-set = utf8

[mysqlimport]

[mysqlshow]

[mysqlslap]
</blockquote>

#### 5. 포트변경 등
<blockquote>
# vi server.cnf
----------------------------- 설정참고
[mysqld]
port=43301
character-set-server = utf8
collation-server = utf8_general_ci
init_connect=SET NAMES utf8
</blockquote>

#### 6. 서비스 등록 확인
<blockquote># systemctl status mariadb.service</blockquote>


#### 7. MariaDB 실행
<blockquote># systemctl start mariadb.service</blockquote>

#### 8. 부팅 시 자동실행 등록
<blockquote># systemctl enable mariadb.service</blockquote>

#### 9. MariaDB 관리자 계정 비밀번호 초기화
<blockquote>	### MySQL 접속 ###
	$ mysql -u root -p
	$ Enter password:       // 비밀번호 설정이 안되있으므로 그냥 엔터 한번더 입력.
	### root 비밀번호 설정, 밖으로 빠져나와서 실행 ###
	1. mysqladmin을 이용하여 root 암호 설정
	$ mysqladmin -u root -p password '새로운비밀번호'
	//명령어 실행 후 비밀번호를 물어보지만 처음에는 root 비밀번호가 없으므로 그냥 엔터를 치면 된다.

</blockquote>

#### 10. 사용자 추가 및 권한
<blockquote>
use mysql;	# mysql 스키마 선택
select user, host from user;	# 사용자 목록 조회

# ex2) 외부 접근을 허용하는 사용자 추가
create user 'user123'@'%' identified by 'password123';
create database yourdb;
grant all privileges on yourdb.* to 'user123'@'%';
</blockquote>

<방화벽 오픈>
Aws 환경에 따라 firewalld 설치후 google링을 통해 검색하여 방화벽 오픈 설정.

